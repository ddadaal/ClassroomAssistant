### 质量属性效用树

|质量属性|具体属性|场景|
|-|-|-|
|安全性|数据安全|A1：禁止未授权用户修改本地数据[高，中]|
|安全性|权限控制|A2：用户执行操作前验证权限[高，中]|

### ATAM分析

<table>
	<tr><td colspan="5">场景A1：禁止未授权用户修改本地数据</td></tr>
	<tr>
		<td>质量属性</td>
		<td>安全性</td>
	</tr>
	<tr>
		<td>环境</td>
		<td>系统运行时</td>
	</tr>
	<tr>
		<td>刺激</td>
		<td>未授权用户试图访问本地数据库</td>
	</tr>
	<tr>
		<td>响应</td>
		<td>系统拒绝此次操作，并记录操作源、操作行为到日志中</td>
	</tr>
	<tr>
		<td>架构决策</td>
		<td>敏感点</td>
		<td>权衡点</td>
		<td>风险</td>
		<td>非风险</td>
	</tr>
	<tr>
		<td>限制数据库访问权限</td>
		<td>S1</td>
		<td>T1</td>
		<td>R1</td>
		<td>N1</td>
	</tr>
	<tr>
		<td>原因</td>
		<td>本系统事关学生敏感数据（成绩、回答记录等），因此数据安全性是很重要的。一些恶意用户可能会视图修改老师节点上的敏感数据，限制数据库访问权限可以有效防止恶意修改。</td>
	</tr>
	<tr>
		<td>相关的架构图</td>
		<td>略</td>
	</tr>
</table>

<table>
	<tr><td colspan="5">场景A2：用户执行操作前验证权限</td></tr>
	<tr>
		<td>质量属性</td>
		<td>安全性</td>
	</tr>
	<tr>
		<td>环境</td>
		<td>系统运行时</td>
	</tr>
	<tr>
		<td>刺激</td>
		<td>用户执行操作</td>
	</tr>
	<tr>
		<td>响应</td>
		<td>系统验证用户权限，判断是否可以执行</td>
	</tr>
	<tr>
		<td>架构决策</td>
		<td>敏感点</td>
		<td>权衡点</td>
		<td>风险</td>
		<td>非风险</td>
	</tr>
	<tr>
		<td>用户执行操作前验证权限</td>
		<td>S2</td>
		<td>T2</td>
		<td>无</td>
		<td>N2</td>
	</tr>
	<tr>
		<td>原因</td>
		<td>本系统的用户分为学生和教师等多种身份，为防止无权限的操作发生，应该在用户执行操作前验证权限</td>
	</tr>
	<tr>
		<td>相关的架构图</td>
		<td>略</td>
	</tr>
</table>

### 敏感点

|#|架构决策|原因|
|-|-|-|
|S1|限制数据库访问权限|安全性和性能的敏感点。保证数据未被纂改，可能会带来性能上的开销。|
|S2|用户执行操作前验证权限|安全性和性能的敏感点。每次操作前需要进行验证，会带来性能上的开销。|

### 权衡点

|#|架构决策|原因|
|-|-|-|
|T1|限制数据库访问权限|安全性和性能的权衡点。牺牲部分安全性，保证性能。|
|T2|用户执行操作前验证权限|安全性和性能的权衡点。牺牲部分安全性，保证性能。|


### 风险

|#|架构决策|原因|
|-|-|-|
|R1|限制数据库访问权限|数据库可能被暴力破解。|


### 非风险

|#|架构决策|原因|
|-|-|-|
|N1|限制数据库访问权限|大部分数据库均提供权限验证的功能。|
|N2|用户执行操作前验证权限|将操作分为不同等级，验证高等级操作|
